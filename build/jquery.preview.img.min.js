!function(a){var b,c;b=function(b,c){this.container=a(b),this.options=c,this.liList=a(b).find(".right-img-list li"),this.rightBtn=a(b).find(".right-view"),this.leftBtn=a(b).find(".left-view"),this.downBtn=a(b).find(".down-view"),this.upBtn=a(b).find(".up-view"),this.closeBtn=a(b).find(".preview-title b"),this.titleName=a(b).find(".file-name-fs"),this.showImgNode=a(b).find(".file-img-fs"),this.create=function(){if(_this.options.imgArr.length>0){for(var b=_this.options.imgArr,c="",d=0,e=b.length;e>d;d++)void 0===b[d].name&&(b[d].name=""),c+='<li data-name="'+b[d].name+'" style="top:0" data-url="'+b[d].url+'"><img src="'+b[d].url+'" alt=""/></li>';var f=b[0],g='<div class="view-image-fs" style="display: none"><div class="preview-title"><span class="file-name-fs">'+f.name+'</span><b></b></div><div class="left-show-img"><div><button class="left-view"></button><img class="file-img-fs" src="'+f.url+'" alt=""/><button class="right-view"></button></div></div><div class="right-img-list"><button class="up-view" style="display: none"></button><ul>'+c+'</ul><button class="down-view" style="display: none"></button></div></div>';a(body).append(a(g))}},this.initShowImg=function(){var b=this;b.liList.get(0)&&(b.liList.length>1&&b.rightBtn.removeClass("unUse"),b.liList.each(function(c){a(this).attr("data-checked",!1).attr("data-pos",c),0===c&&a(this).css("border","2px solid "+b.options.imgCheckedBorderColor).attr("data-checked",!0)})),b.options.initShow&&""!==b.options.showBtn&&(b.show(),b.closeBtn.hide(),f(b)),a(window).resize(function(){f(b)})},this.show=function(b){a("html").css("overflow","hidden"),a("body").css("margin-right","17px"),b.container.show(),f(b);var c=setTimeout(function(){b.container.addClass("previewImgShow"),clearTimeout(c)},20)},this.close=function(b){b.container.removeClass("previewImgShow");var c=setTimeout(function(){b.container.hide(),a("html").removeAttr("style"),a("body").removeAttr("style"),clearTimeout(c)},300)};var e=function(a,b,c){c.liList.css("border","2px solid #fff").attr("data-checked",!1),c.titleName.html(a),c.showImgNode.attr("src",b).removeAttr("style"),f(c)},g=function(a,b){var c=a.attr("data-name"),d=a.attr("data-url");e(c,d,b),a.css("border","2px solid "+b.options.imgCheckedBorderColor).attr("data-checked",!0)},h=function(a,b){"hide"===a?b.rightBtn.attr("class").match("unUse")||b.rightBtn.addClass("unUse"):b.rightBtn.attr("class").match("unUse")&&b.rightBtn.removeClass("unUse")},i=function(a,b){"hide"===a?b.leftBtn.attr("class").match("unUse")||b.leftBtn.addClass("unUse"):b.leftBtn.attr("class").match("unUse")&&b.leftBtn.removeClass("unUse")};this.liListClick=function(){var b=this;b.liList.each(function(){a(this).click(function(){var c=a(this).attr("data-pos"),d=a(this).attr("data-name"),f=a(this).attr("data-url");0==c?(i("hide",b),1!==b.liList.length&&h("show",b)):~~c===b.liList.length-1?(h("hide",b),i("show",b)):(h("show",b),i("show",b)),e(d,f,b),a(this).css("border","2px solid "+b.options.imgCheckedBorderColor).attr("data-checked",!0)})})},this.rightBtnClick=function(b){var c,b=b,e=b.liList.length;b.leftBtn.attr("class").match("unUse")&&b.leftBtn.removeClass("unUse"),b.liList.each(function(f){if("true"===a(this).attr("data-checked")&&(c=f,c===e-2))return b.rightBtn.addClass("unUse"),!0;if(f===c+1){var h=b.liList.get(0).style.top,i=d(b).ul,j=d(b).li,k=j*f+parseInt(h);if(0>=k){var l=parseInt(h)-k;b.liList.animate({top:l})}else{var m=Math.ceil((k-i)/j);m>0&&b.liList.animate({top:parseInt(h)-m*k})}g(a(this),b)}})},this.leftBtnClick=function(b){var b=b;h("show",b);var c;b.liList.each(function(d){return"true"===a(this).attr("data-checked")&&(c=d,1===c)?(b.leftBtn.addClass("unUse"),!0):void 0}),b.liList.each(function(e){if(e===c-1){var f=b.liList.get(0).style.top,h=d(b).ul,i=d(b).li,j=i*e+parseInt(f);if(j>0){if(j-h>0){var k=Math.ceil((j-h)/i);b.liList.animate({top:i*-k+parseInt(f)})}}else b.liList.animate({top:parseInt(f)-j});g(a(this),b)}})},this.upAndDownMove=function(a,b){var c=!1,e=b.liList.get(0).style.top,f=d(b).ul,g=d(b).li,h=-parseInt(e)/g,i=g*b.liList.length+parseInt(e);if("up"===a){if(0===parseInt(e))return;h--}if("down"===a){if(f>=i)return;h++}c||(c=!0,b.liList.animate({top:-h*g},200,function(){c=!1}))}};var d=function(b){var c=a(".right-img-list ul").height(),d=a(".right-img-list ul li").outerHeight()+parseInt(a(".right-img-list ul li").css("marginTop")),e=c&&c>0?c:a(window).height()-140,f=d&&f>0?f:b.options.listImgHeight;return{ul:e,li:f}},e=function(a){a.showImgNode.removeAttr("style")},f=function(b){e(b);var c=a(window).height(),d=a(window).width();b.showImgNode.height()>c-100&&b.showImgNode.css({height:c-100}),b.showImgNode.width()>d-300&&b.showImgNode.css({width:d-300})};c={listImgHeight:72,haveTitle:!0,imgArr:[],imgCheckedBorderColor:"#d73300",initShow:!1,showBtn:"",haveHtml:!1},a.fn.previewImg=function(d){return a(this).each(function(){d=a.extend({},c,d);var e=new b(this,d);!d.haveHtml&&d.imgArr.length>0&&e.create(),e.initShowImg(),d.showBtn&&""!==d.showBtn&&(d.showBtn.click(function(){e.show(e)}),e.closeBtn.click(function(){e.close(e)})),e.liListClick(),e.rightBtn.click(function(){e.rightBtnClick(e)}),e.leftBtn.click(function(){e.leftBtnClick(e)}),e.upBtn.click(function(){e.upAndDownMove("up",e)}),e.downBtn.click(function(){e.upAndDownMove("down",e)})})}}(jQuery);